(this.webpackJsonpwork_split=this.webpackJsonpwork_split||[]).push([[0],{27:function(e,t,a){e.exports=a(47)},32:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),u=a.n(c),o=a(11),l=a(3),i=(a(32),a(2));var s=function(e){var t=e.name,a=e.id,n=e.setScreenState,c=e.setFocusProject;return Object(l.f)(),r.a.createElement("button",{id:a,className:"projectItem",onClick:function(e){e.preventDefault(),c(e.target.id),n("Focus")}},t)};var m=function(e){var t=e.setScreenState;return r.a.createElement("button",{onClick:function(){t("Create")},className:"addButton"},"New project")},d=a(5),p=a.n(d),f=a(8),v=a(25),E=(a(41),a(43),v.initializeApp({apiKey:"AIzaSyBluX_wy1ha8nvvBPCAi3M35Lhcp1T-8SA",authDomain:"web-dev-practical-218a8.firebaseapp.com",databaseURL:"https://web-dev-practical-218a8.firebaseio.com",projectId:"web-dev-practical-218a8",storageBucket:"web-dev-practical-218a8.appspot.com",messagingSenderId:"380781875179",appId:"1:380781875179:web:d200e6736ea5ed5b2c13ae"})),b=function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,E.firestore().collection("projects").where("user","==",t).get().then((function(e){e.forEach((function(e){var t=[];t.push(e.data()),t.push(e.id),a.push(t)}))}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=r.a.createContext(),j=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(i.a)(a,2),u=c[0],o=c[1],l=Object(n.useState)(!0),s=Object(i.a)(l,2),m=s[0],d=s[1];return Object(n.useEffect)((function(){E.auth().onAuthStateChanged((function(e){o(e),d(!1)}))}),[]),m?r.a.createElement(r.a.Fragment,null,"Loading..."):r.a.createElement(h.Provider,{value:{currentUser:u}},t)};var S=function(e){var t=e.setScreenState,a=e.setFocusProject,c=Object(n.useContext)(h),u=Object(n.useState)([]),o=Object(i.a)(u,2),l=o[0],d=o[1];Object(n.useEffect)((function(){b(c.currentUser.uid).then((function(e){d(e)}))}),[]);var p=l.map((function(e,n){return r.a.createElement(s,{setFocusProject:a,setScreenState:t,key:n,name:e[0].projName,id:e[1]})}));return r.a.createElement("div",null,p,r.a.createElement(m,{setScreenState:t}))},g=a(13);var O=function(e){var t=e.id;return r.a.createElement("input",{className:"textInput",type:"text",id:t})};var w=function(e){var t=e.action;return r.a.createElement("div",{className:"newSplit"},r.a.createElement("button",{onClick:t},r.a.createElement("i",{className:"fas fa-plus"})))};var N=function(e){var t=e.id,a=e.action,n=e.text;return r.a.createElement("button",{className:"button",id:t,onClick:a},n)},k=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=E.auth().currentUser.uid,e.next=3,E.firestore().collection("projects").doc().set({projName:t,dueDate:a,user:r}).then((function(){E.firestore().collection("projects").where("user","==",r).where("projName","==",t).get().then((function(e){e.forEach((function(e){n.forEach((function(t){return E.firestore().collection("projects").doc(e.id).collection("splits").doc(t.id).set({name:t.name,due:t.due,status:t.status})}))}))}))}));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();var x=function(e){var t=e.name,a=e.due,n=e.id,c=e.setSplitList,u=e.splitList;return r.a.createElement("div",{id:n,className:"split "},r.a.createElement("button",{onClick:function(e){c(u.splice(e.target.parentElement.id,1)),console.log(u)}},t,r.a.createElement("br",null)," Due on ",a))};var C=function(e){var t=e.children;return r.a.createElement("div",{className:"focusWrapper"},t)};var y=function(e){var t=e.setScreenState,a=Object(n.useState)([]),c=Object(i.a)(a,2),u=c[0],o=c[1],l=Object(n.useState)({name:"",due:"",status:!1}),s=Object(i.a)(l,2),m=s[0],d=s[1],p=u.map((function(e,t){return r.a.createElement(x,{splitList:u,setSplitList:o,key:t,name:e.name,due:e.due,id:t})}));return r.a.createElement(C,null,r.a.createElement("label",{htmlFor:"projName"},"Project Name"),r.a.createElement(O,{id:"projName"}),r.a.createElement("label",{htmlFor:"dueDate"},"Due date"),r.a.createElement("input",{type:"date",id:"dueDate"}),r.a.createElement("div",{id:"splitList"},p),r.a.createElement("label",{htmlFor:"name"},"Split name"),r.a.createElement("input",{type:"text",placeholder:"Name",id:"name",value:m.name,onChange:function(e){return d(Object(g.a)(Object(g.a)({},m),{},{name:e.target.value}))}}),r.a.createElement("label",{htmlFor:"due"},"Split due date"),r.a.createElement("input",{type:"date",id:"due",value:m.due,onChange:function(e){return d(Object(g.a)(Object(g.a)({},m),{},{due:e.target.value}))}}),r.a.createElement(w,{action:function(e){o(u.concat(m))}}),r.a.createElement(N,{id:"create",action:function(e){e.preventDefault();var a=document.getElementById("projName").value,n=document.getElementById("dueDate").value;k(a,n,u).then((function(){t("Main")}))},text:"Create"}))};var D=function(e){var t=e.projName,a=e.dueDate;return r.a.createElement("div",{className:"focusHeader"},r.a.createElement("h3",null,t),r.a.createElement("h4",null,"Due: ",a))};var F=function(e){var t=e.name,a=e.due,n=e.id,c=e.status,u=e.setCurrentEdit,o=function(e){u({id:e.target.id,name:t,due:a,status:c})};return c?r.a.createElement("div",{className:"split complete"},r.a.createElement("button",{id:"split"+n,onClick:o},t,r.a.createElement("br",null)," Due on ",a)):r.a.createElement("div",{className:"split "},r.a.createElement("button",{id:"split"+n,onClick:o},t,r.a.createElement("br",null)," Due on ",a))},P=function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,E.firestore().collection("projects").doc(t).get().then((function(e){a.push(e.data()),a.push(e.id)}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,E.firestore().collection("projects").doc(t).collection("splits").get().then((function(e){e.forEach((function(e){a.push(e.data())}))}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n,r,c){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.firestore().collection("projects").doc(c).collection("splits").doc(n).update({due:a,name:t,status:r});case 2:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c){return e.apply(this,arguments)}}();var L=function(e){var t=e.splitId,a=e.name,c=e.due,u=e.setCurrentEdit,o=e.status,l=e.focusProject,s=Object(n.useState)(a),m=Object(i.a)(s,2),d=m[0],p=m[1],f=Object(n.useState)(c),v=Object(i.a)(f,2),E=v[0],b=v[1],h=Object(n.useState)(o),j=Object(i.a)(h,2),S=j[0],g=j[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),B(d,E,t,e.target.elements.complete.checked,l),u()}},r.a.createElement("input",{type:"text",value:d,onChange:function(e){return p(e.target.value)}}),r.a.createElement("input",{type:"date",value:E,onChange:function(e){return b(e.target.value)}}),r.a.createElement("input",{type:"checkbox",id:"complete",checked:S,onChange:function(e){return g(e.target.checked)}}),r.a.createElement("label",{htmlFor:"complete"},"Mark as complete"),r.a.createElement("button",{className:"button",type:"submit"},"Save"))},A=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,E.firestore().collection("projects").doc(t).delete().then((function(){E.firestore().collection("projects").doc(t).collection(t).doc("splits").delete()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var M=function(e){var t=e.id,a=e.setScreenState;return r.a.createElement("button",{id:t,className:"deleteProject",onClick:function(e){!function(e){A(e).then((function(){a("Main")}))}(e.target.id)}},"Delete")};var U=function(e){var t=e.focusProject,a=e.setScreenState,c=Object(n.useState)("loading"),u=Object(i.a)(c,2),o=u[0],l=u[1],s=Object(n.useState)("loading"),m=Object(i.a)(s,2),d=m[0],p=m[1],f=Object(n.useState)([]),v=Object(i.a)(f,2),E=v[0],b=v[1],h=Object(n.useState)(),j=Object(i.a)(h,2),S=j[0],g=j[1];Object(n.useEffect)((function(){console.log(E),P(t).then((function(e){l(e[0].projName),p(e[0].dueDate),I(e[1]).then((function(e){b(e)}))}))}),[S]);var O=E.map((function(e,t){return r.a.createElement(F,{status:e.status,currentEdit:S,setCurrentEdit:g,key:t,name:e.name,due:e.due,id:t})}));return r.a.createElement(C,null,r.a.createElement(D,{projName:o,dueDate:d}),S?r.a.createElement(L,{focusProject:t,splitId:S.id,setCurrentEdit:g,name:S.name,due:S.due,status:S.status}):r.a.createElement("div",null,O),r.a.createElement(M,{setScreenState:a,id:t}))};var W=function(e){var t=e.setScreenState;return r.a.createElement("div",{className:"header"},r.a.createElement("button",{className:"homeButton",id:"home",onClick:function(){t("Main")}},r.a.createElement("i",{className:"fas fa-home"}),"  "),r.a.createElement("h1",null,"Project planner"),r.a.createElement("button",{className:"logoutButton",id:"logout",onClick:function(){E.auth().signOut()}},r.a.createElement("i",{className:"fas fa-sign-out-alt"})))};var _=function(e){var t=e.children;return r.a.createElement("div",{className:"main"},t)};var z=function(e){var t=e.children;return r.a.createElement("div",{className:"container"},t)};var J=function(e){var t=e.children;return r.a.createElement("div",{className:"background"},t)};var H=function(){var e=Object(n.useState)("Main"),t=Object(i.a)(e,2),a=t[0],c=t[1],u=Object(n.useState)(""),o=Object(i.a)(u,2),l=o[0],s=o[1];return r.a.createElement(J,null,r.a.createElement(z,null,r.a.createElement(W,{setScreenState:c}),r.a.createElement(_,null,r.a.createElement("div",null,"Create"==a?r.a.createElement(y,{setScreenState:c}):"Focus"==a?r.a.createElement(U,{focusProject:l,setScreenState:c}):r.a.createElement(S,{setFocusProject:s,setScreenState:c})))))},K=a(26);var R=function(e){var t=e.id;return r.a.createElement("input",{type:"password",id:t})};var T=function(){return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.elements,a=t.email,n=t.password;E.auth().createUserWithEmailAndPassword(a.value,n.value)}},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement(O,{id:"email"}),r.a.createElement("label",{htmlFor:"password"},"password"),r.a.createElement(R,{id:"password"}),r.a.createElement(N,{id:"singup",text:"Sign up"}))};var X=function(){return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.elements,a=t.email,n=t.password;E.auth().signInWithEmailAndPassword(a.value,n.value)}},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement(O,{id:"email"}),r.a.createElement("label",{htmlFor:"password"},"password"),r.a.createElement(R,{id:"password"}),r.a.createElement(N,{id:"login",text:"Log in"}))};var $=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],u=a[1];return r.a.createElement(J,null,r.a.createElement(z,null,r.a.createElement(_,null,r.a.createElement(C,null,c||r.a.createElement("div",null,r.a.createElement(N,{id:"login",action:function(){u(X)},text:"Log in"}),r.a.createElement(N,{id:"signup",action:function(){u(T)},text:"Sign up"}))))))},q=function(e){var t=e.component,a=Object(K.a)(e,["component"]),c=Object(n.useContext)(h).currentUser;return r.a.createElement(l.a,Object.assign({},a,{render:function(e){return c?r.a.createElement(t,e):r.a.createElement($,null)}}))};var G=function(){return r.a.createElement(j,null,r.a.createElement(o.a,null,r.a.createElement(l.c,null,r.a.createElement(q,{exact:!0,path:"/",component:H}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.35a93b27.chunk.js.map